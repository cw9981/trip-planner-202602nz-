<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>èˆªç­è³‡è¨Š</title>
    <link rel="stylesheet" href="css/main-style.css">
</head>
<body>
    <div class="travel-dates">
        <div class="travel-info">
            <div class="date-info">
                âœˆï¸ æ—…è¡Œæ—¥æœŸï¼š2026å¹´2æœˆ7æ—¥ - 2026å¹´3æœˆ2æ—¥ (å…±24å¤©)
            </div>
            <div class="participants">
                ğŸ‘¥ åƒåŠ äººå“¡ï¼šchingwen, jane, zhi
            </div>
        </div>
    </div>
    
    <div class="navigation">
        <button class="nav-button" onclick="window.location.href='itinerary-display.html'">
            è¡Œç¨‹è¦åŠƒ
        </button>
        <button class="nav-button" onclick="window.location.href='todo.html'">
            å¾…è¾¦äº‹ä»¶
        </button>
        <button class="nav-button" onclick="window.location.href='sleep.html'">
            ä½å®¿é ç´„
        </button>
    </div>

    <h2>å»ç¨‹èˆªç­</h2>
    <table id="outbound-table">
        <thead>
            <tr>
                <th>èˆªç­</th>
                <th>å‡ºç™¼åœ°</th>
                <th>ç›®çš„åœ°</th>
                <th>æ—¥æœŸ</th>
                <th>å‡ºç™¼æ™‚é–“</th>
                <th>åˆ°é”æ™‚é–“</th>
                <th>é£›è¡Œæ™‚é–“</th>
            </tr>
        </thead>
        <tbody id="outbound-tbody">
            <!-- èˆªç­æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </tbody>
    </table>

    <h2>å›ç¨‹èˆªç­</h2>
    <table id="inbound-table">
        <thead>
            <tr>
                <th>èˆªç­</th>
                <th>å‡ºç™¼åœ°</th>
                <th>ç›®çš„åœ°</th>
                <th>æ—¥æœŸ</th>
                <th>å‡ºç™¼æ™‚é–“</th>
                <th>åˆ°é”æ™‚é–“</th>
                <th>é£›è¡Œæ™‚é–“</th>
            </tr>
        </thead>
        <tbody id="inbound-tbody">
            <!-- èˆªç­æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </tbody>
    </table>

    <script>
        // è·å–èˆªç­æ•°æ®å¹¶æ¸²æŸ“è¡¨æ ¼
        fetch('data/data_flights.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('ç½‘ç»œå“åº”ä¸æ­£å¸¸');
                }
                return response.json();
            })
            .then(data => {
                // æ¸²æŸ“å»ç¨‹èˆªç­
                renderFlights(data[0].outbound, 'outbound-tbody');
                
                // æ¸²æŸ“å›ç¨‹èˆªç­
                renderFlights(data[0].inbound, 'inbound-tbody');
            })
            .catch(error => {
                console.error('è·å–èˆªç­æ•°æ®æ—¶å‡ºé”™:', error);
                document.getElementById('outbound-tbody').innerHTML = '<tr><td colspan="7">æ— æ³•åŠ è½½èˆªç­æ•°æ®</td></tr>';
                document.getElementById('inbound-tbody').innerHTML = '<tr><td colspan="7">æ— æ³•åŠ è½½èˆªç­æ•°æ®</td></tr>';
            });

        // æ¸²æŸ“èˆªç­æ•°æ®çš„å‡½æ•°
        function renderFlights(flights, tbodyId) {
            const tbody = document.getElementById(tbodyId);
            tbody.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹
            
            flights.forEach((flight, index) => {
                // åˆ›å»ºèˆªç­è¡Œ
                const flightRow = document.createElement('tr');
                
                // è§£ææœºåœºä¿¡æ¯
                const departureParts = flight.departure.split('/');
                const destinationParts = flight.destination.split('/');
                
                flightRow.innerHTML = `
                    <td>${flight.flight}</td>
                    <td>${departureParts[0]}<br>${departureParts[2]}<br>${departureParts[1]}</td>
                    <td>${departureParts[0]}<br>${destinationParts[2]}<br>${destinationParts[1]}</td>
                    <td>${formatDate(flight.date)}</td>
                    <td>${flight.departure_time}</td>
                    <td>${flight.arrival_time}</td>
                    <td class="flight-duration">${flight.flight_duration}</td>
                `;
                
                tbody.appendChild(flightRow);
                
                // å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªèˆªç­ï¼Œæ·»åŠ è½¬æœºä¿¡æ¯
                if (index < flights.length - 1 && flight.layover) {
                    const transferRow = document.createElement('tr');
                    transferRow.className = 'transfer';
                    transferRow.innerHTML = `<td colspan="7">ğŸ”„ ${destinationParts[2]}è½‰æ©Ÿæ™‚é–“ï¼š${flight.layover}</td>`;
                    tbody.appendChild(transferRow);
                }
            });
        }

        // æ ¼å¼åŒ–æ—¥æœŸå‡½æ•°
        function formatDate(dateString) {
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${year}å¹´${month}æœˆ${day}æ—¥`;
        }
    </script>
</body>
</html>